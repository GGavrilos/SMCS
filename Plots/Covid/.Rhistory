"MCS"=((1:n)<=data_05$value[7]),"quantile"=0.5,"method"="naive")
data3=rbind(df1,df3,df4,df5,df6,df7)
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data07_naive.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_07$value[1],"quantile"=0.7,"method"="naive")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_07$value[3]),"quantile"=0.7,"method"="naive")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_07$value[4]),"quantile"=0.7,"method"="naive")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_07$value[5]),"quantile"=0.7,"method"="naive")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_07$value[6]),"quantile"=0.7,"method"="naive")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_07$value[7]),"quantile"=0.7,"method"="naive")
data4=rbind(df1,df3,df4,df5,df6,df7)
data=rbind(data1,data2,data3,data4)
# "baseline(1), "MOBS-gleam(2), "PSI-draft(3), "GT-deep(4),"ensemble(5), "CDC-ensemble(6)
data$MCS[which((data$model)=="MOBS-gleam")]=2*data$MCS[which((data$model)=="MOBS-gleam")]
data$MCS[which((data$model)=="PSI-draft")]=3*data$MCS[which((data$model)=="PSI-draft")]
data$MCS[which((data$model)=="GT-deep")]=4*data$MCS[which((data$model)=="GT-deep")]
data$MCS[which((data$model)=="ensemble")]=5*data$MCS[which((data$model)=="ensemble")]
data$MCS[which((data$model)=="CDC-ensemble")]=6*data$MCS[which((data$model)=="CDC-ensemble")]
data$model=as.factor(data$model)
data$model <- factor(data$model,
levels=c("baseline", "MOBS-gleam", "PSI-draft", "GT-deep","ensemble", "CDC-ensemble")
,ordered=TRUE)
save(data,file="data_naiv.rda")
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data01_smart.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_01$value[1],"quantile"=0.1,"method"="smart")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_01$value[3]),"quantile"=0.1,"method"="smart")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_01$value[4]),"quantile"=0.1,"method"="smart")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_01$value[5]),"quantile"=0.1,"method"="smart")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_01$value[6]),"quantile"=0.1,"method"="smart")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_01$value[7]),"quantile"=0.1,"method"="smart")
data1=rbind(df1,df3,df4,df5,df6,df7)
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data03_smart.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_03$value[1],"quantile"=0.3,"method"="smart")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_03$value[3]),"quantile"=0.3,"method"="smart")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_03$value[4]),"quantile"=0.3,"method"="smart")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_03$value[5]),"quantile"=0.3,"method"="smart")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_03$value[6]),"quantile"=0.3,"method"="smart")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_03$value[7]),"quantile"=0.3,"method"="smart")
data2=rbind(df1,df3,df4,df5,df6,df7)
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data05_smart.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_05$value[1],"quantile"=0.5,"method"="smart")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_05$value[3]),"quantile"=0.5,"method"="smart")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_05$value[4]),"quantile"=0.5,"method"="smart")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_05$value[5]),"quantile"=0.5,"method"="smart")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_05$value[6]),"quantile"=0.5,"method"="smart")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_05$value[7]),"quantile"=0.5,"method"="smart")
data3=rbind(df1,df3,df4,df5,df6,df7)
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data07_smart.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_07$value[1],"quantile"=0.7,"method"="smart")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_07$value[3]),"quantile"=0.7,"method"="smart")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_07$value[4]),"quantile"=0.7,"method"="smart")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_07$value[5]),"quantile"=0.7,"method"="smart")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_07$value[6]),"quantile"=0.7,"method"="smart")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_07$value[7]),"quantile"=0.7,"method"="smart")
data4=rbind(df1,df3,df4,df5,df6,df7)
data=rbind(data1,data2,data3,data4)
data$MCS[which((data$model)=="MOBS-gleam")]=2*data$MCS[which((data$model)=="MOBS-gleam")]
data$MCS[which((data$model)=="PSI-draft")]=3*data$MCS[which((data$model)=="PSI-draft")]
data$MCS[which((data$model)=="GT-deep")]=4*data$MCS[which((data$model)=="GT-deep")]
data$MCS[which((data$model)=="ensemble")]=5*data$MCS[which((data$model)=="ensemble")]
data$MCS[which((data$model)=="CDC-ensemble")]=6*data$MCS[which((data$model)=="CDC-ensemble")]
data$model=as.factor(data$model)
data$model <- factor(data$model,
levels=c("baseline", "MOBS-gleam", "PSI-draft", "GT-deep","ensemble", "CDC-ensemble")
,ordered=TRUE)
save(data,file="data_smart.rda")
m=6
mypalette=brewer.pal(m,"Set1")
library(lubridate)
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/truth.rda")
times= as.POSIXct(truth$target_end_date, format = "%Y-%m-%d", tz = "UTC")
years = year(times)
unique_years=ind=unique(years)[-1]
for (j in 1:length(unique_years)){ind[j] = min(which(years==unique_years[j]))}
###############################################################################
################################ naiv ######################################
###############################################################################
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data_naiv.rda")
p1= ggplot(subset(data,quantile==0.1), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.1"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
p1
View(subset(data,quantile==0.1))
p1= ggplot(subset(data,quantile==0.1), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.1"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
# theme(legend.position = "none")+
scale_color_manual(values=mypalette)
p1
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data01_naive.rda")
View(data_01)
n = 130
setwd("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid")
#' CDC_ensemble (1), 4_week_ensemble (2), baseline (3), ensemble (4), GT-deep (5),
#' mobs-gleam (6), psi-draft(7)
# "baseline(1), "MOBS-gleam(2), "PSI-draft(3), "GT-deep(4),"ensemble(5), "CDC-ensemble(6)
###############################################################################
################################ naiv ######################################
###############################################################################
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data01_naive.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_01$value[1],"quantile"=0.1,"method"="naive")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_01$value[2]),"quantile"=0.1,"method"="naive")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_01$value[3]),"quantile"=0.1,"method"="naive")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_01$value[4]),"quantile"=0.1,"method"="naive")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_01$value[5]),"quantile"=0.1,"method"="naive")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_01$value[6]),"quantile"=0.1,"method"="naive")
data1=rbind(df1,df3,df4,df5,df6,df7)
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data03_naive.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_03$value[1],"quantile"=0.3,"method"="naive")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_03$value[2]),"quantile"=0.3,"method"="naive")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_03$value[3]),"quantile"=0.3,"method"="naive")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_03$value[4]),"quantile"=0.3,"method"="naive")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_03$value[5]),"quantile"=0.3,"method"="naive")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_03$value[6]),"quantile"=0.3,"method"="naive")
data2=rbind(df1,df3,df4,df5,df6,df7)
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data05_naive.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_05$value[1],"quantile"=0.5,"method"="naive")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_05$value[2]),"quantile"=0.5,"method"="naive")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_05$value[3]),"quantile"=0.5,"method"="naive")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_05$value[4]),"quantile"=0.5,"method"="naive")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_05$value[5]),"quantile"=0.5,"method"="naive")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_05$value[6]),"quantile"=0.5,"method"="naive")
data3=rbind(df1,df3,df4,df5,df6,df7)
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data07_naive.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_07$value[1],"quantile"=0.7,"method"="naive")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_07$value[2]),"quantile"=0.7,"method"="naive")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_07$value[3]),"quantile"=0.7,"method"="naive")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_07$value[4]),"quantile"=0.7,"method"="naive")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_07$value[5]),"quantile"=0.7,"method"="naive")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_07$value[6]),"quantile"=0.7,"method"="naive")
data4=rbind(df1,df3,df4,df5,df6,df7)
data=rbind(data1,data2,data3,data4)
# "baseline(1), "MOBS-gleam(2), "PSI-draft(3), "GT-deep(4),"ensemble(5), "CDC-ensemble(6)
data$MCS[which((data$model)=="MOBS-gleam")]=2*data$MCS[which((data$model)=="MOBS-gleam")]
data$MCS[which((data$model)=="PSI-draft")]=3*data$MCS[which((data$model)=="PSI-draft")]
data$MCS[which((data$model)=="GT-deep")]=4*data$MCS[which((data$model)=="GT-deep")]
data$MCS[which((data$model)=="ensemble")]=5*data$MCS[which((data$model)=="ensemble")]
data$MCS[which((data$model)=="CDC-ensemble")]=6*data$MCS[which((data$model)=="CDC-ensemble")]
data$model=as.factor(data$model)
data$model <- factor(data$model,
levels=c("baseline", "MOBS-gleam", "PSI-draft", "GT-deep","ensemble", "CDC-ensemble")
,ordered=TRUE)
save(data,file="data_naiv.rda")
###############################################################################
################################ smart ######################################
###############################################################################
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data01_smart.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_01$value[1],"quantile"=0.1,"method"="smart")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_01$value[2]),"quantile"=0.1,"method"="smart")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_01$value[3]),"quantile"=0.1,"method"="smart")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_01$value[4]),"quantile"=0.1,"method"="smart")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_01$value[5]),"quantile"=0.1,"method"="smart")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_01$value[6]),"quantile"=0.1,"method"="smart")
data1=rbind(df1,df3,df4,df5,df6,df7)
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data03_smart.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_03$value[1],"quantile"=0.3,"method"="smart")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_03$value[2]),"quantile"=0.3,"method"="smart")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_03$value[3]),"quantile"=0.3,"method"="smart")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_03$value[4]),"quantile"=0.3,"method"="smart")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_03$value[5]),"quantile"=0.3,"method"="smart")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_03$value[6]),"quantile"=0.3,"method"="smart")
data2=rbind(df1,df3,df4,df5,df6,df7)
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data05_smart.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_05$value[1],"quantile"=0.5,"method"="smart")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_05$value[2]),"quantile"=0.5,"method"="smart")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_05$value[3]),"quantile"=0.5,"method"="smart")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_05$value[4]),"quantile"=0.5,"method"="smart")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_05$value[5]),"quantile"=0.5,"method"="smart")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_05$value[6]),"quantile"=0.5,"method"="smart")
data3=rbind(df1,df3,df4,df5,df6,df7)
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data07_smart.rda")
df1 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="CDC-ensemble",
"MCS"=(1:n)<=data_07$value[1],"quantile"=0.7,"method"="smart")
df3 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="baseline",
"MCS"=((1:n)<=data_07$value[2]),"quantile"=0.7,"method"="smart")
df4 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="ensemble",
"MCS"=((1:n)<=data_07$value[3]),"quantile"=0.7,"method"="smart")
df5 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="GT-deep",
"MCS"=((1:n)<=data_07$value[4]),"quantile"=0.7,"method"="smart")
df6 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="MOBS-gleam",
"MCS"=((1:n)<=data_07$value[5]),"quantile"=0.7,"method"="smart")
df7 = data.frame("x"=1:n,"x_end"=c(2:n,NA),"model"="PSI-draft",
"MCS"=((1:n)<=data_07$value[6]),"quantile"=0.7,"method"="smart")
data4=rbind(df1,df3,df4,df5,df6,df7)
data=rbind(data1,data2,data3,data4)
data$MCS[which((data$model)=="MOBS-gleam")]=2*data$MCS[which((data$model)=="MOBS-gleam")]
data$MCS[which((data$model)=="PSI-draft")]=3*data$MCS[which((data$model)=="PSI-draft")]
data$MCS[which((data$model)=="GT-deep")]=4*data$MCS[which((data$model)=="GT-deep")]
data$MCS[which((data$model)=="ensemble")]=5*data$MCS[which((data$model)=="ensemble")]
data$MCS[which((data$model)=="CDC-ensemble")]=6*data$MCS[which((data$model)=="CDC-ensemble")]
data$model=as.factor(data$model)
data$model <- factor(data$model,
levels=c("baseline", "MOBS-gleam", "PSI-draft", "GT-deep","ensemble", "CDC-ensemble")
,ordered=TRUE)
save(data,file="data_smart.rda")
###############################################################################
################################ naiv ######################################
###############################################################################
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data_naiv.rda")
p1= ggplot(subset(data,quantile==0.1), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.1"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
# theme(legend.position = "none")+
scale_color_manual(values=mypalette)
p1
m=6
mypalette=brewer.pal(m,"Set1")
library(lubridate)
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/truth.rda")
times= as.POSIXct(truth$target_end_date, format = "%Y-%m-%d", tz = "UTC")
years = year(times)
unique_years=ind=unique(years)[-1]
for (j in 1:length(unique_years)){ind[j] = min(which(years==unique_years[j]))}
###############################################################################
################################ naiv ######################################
###############################################################################
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data_naiv.rda")
p1= ggplot(subset(data,quantile==0.1), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.1"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
# theme(legend.position = "none")+
scale_color_manual(values=mypalette)
p1
p2= ggplot(subset(data,quantile==0.3), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,7.1)) +
labs(title=expression(tau~"=0.3"))+
scale_y_continuous(breaks=1:7,labels=rep("",7))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
p3= ggplot(subset(data,quantile==0.5), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,7.1)) +
labs(title=expression(tau~"=0.5"))+
scale_y_continuous(breaks=1:7,labels=rep("",7))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
p4= ggplot(subset(data,quantile==0.7), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,7.1)) +
labs(title=expression(tau~"=0.7"))+
scale_y_continuous(breaks=1:7,labels=rep("",7))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
p2= ggplot(subset(data,quantile==0.3), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.3"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
p3= ggplot(subset(data,quantile==0.5), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.5"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
p4= ggplot(subset(data,quantile==0.7), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.7"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
# call last plot to extract legend
p5= ggplot(subset(data,quantile==0.9), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.9"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
scale_color_manual(values=mypalette)
legend_b = get_legend(p5+
guides(color=guide_legend(nrow=1))+
theme(legend.title=element_blank(),
legend.position = "bottom"))
legend = as_ggplot(legend_b)
legend+theme(legend.box.margin=margin(c(0,0,0,0)))
setwd("~/Desktop/EMCS/Plots_paper/Covid")
ggsave("Covid_legend.pdf", width = 10, height = 1)
p2
p3
p4
p5
p5= ggplot(subset(data,quantile==0.9), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.9"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
scale_color_manual(values=mypalette)
p5
# call last plot to extract legend
p5= ggplot(subset(data,quantile==0.5), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.9"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
scale_color_manual(values=mypalette)
p5
legend_b = get_legend(p5+
guides(color=guide_legend(nrow=1))+
theme(legend.title=element_blank(),
legend.position = "bottom"))
legend = as_ggplot(legend_b)
legend+theme(legend.box.margin=margin(c(0,0,0,0)))
setwd("~/Desktop/EMCS/Plots_paper/Covid")
ggsave("Covid_legend.pdf", width = 10, height = 1)
ggsave("Covid_legend.pdf", width = 8, height = 0.8)
ggsave_golden(path = "~/Desktop/EMCS/Plots_paper/Covid",
filename = "Naiv1.pdf",plot=p1)
ggsave_golden(path = "~/Desktop/EMCS/Plots_paper/Covid",
filename = "Naiv2.pdf",plot=p2)
ggsave_golden(path = "~/Desktop/EMCS/Plots_paper/Covid",
filename = "Naiv3.pdf",plot=p3)
ggsave_golden(path = "~/Desktop/EMCS/Plots_paper/Covid",
filename = "Naiv4.pdf",plot=p4)
###############################################################################
################################ smart ######################################
###############################################################################
load("~/Desktop/EMCS/Plots_paper/Covid/RData Files_Covid/data_smart.rda")
p1= ggplot(subset(data,quantile==0.1), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.1"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
p2= ggplot(subset(data,quantile==0.3), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.3"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
p3= ggplot(subset(data,quantile==0.5), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.5"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
p4= ggplot(subset(data,quantile==0.7), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,7.1)) +
labs(title=expression(tau~"=0.6"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
ggsave_golden(path = "~/Desktop/EMCS/Plots_paper/Covid",
filename = "smart1.pdf",plot=p1)
ggsave_golden(path = "~/Desktop/EMCS/Plots_paper/Covid",
filename = "smart2.pdf",plot=p2)
ggsave_golden(path = "~/Desktop/EMCS/Plots_paper/Covid",
filename = "smart3.pdf",plot=p3)
ggsave_golden(path = "~/Desktop/EMCS/Plots_paper/Covid",
filename = "smart4.pdf",plot=p4)
p4= ggplot(subset(data,quantile==0.7), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.6"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
ggsave_golden(path = "~/Desktop/EMCS/Plots_paper/Covid",
filename = "smart4.pdf",plot=p4)
p1= ggplot(subset(data,quantile==0.1), aes(x=x, y=MCS, xend=x_end, yend=MCS,color=model)) +
geom_segment(linewidth=10,alpha=1)+
coord_cartesian(ylim=c(0.9,6.1)) +
labs(title=expression(tau~"=0.1"))+
scale_y_continuous(breaks=1:6,labels=rep("",6))+
scale_x_continuous(breaks=ind,labels=unique_years)+
theme_bw()+
theme(axis.title.y=element_blank(),axis.title.x=element_blank())+ #remove y axis labels
theme(legend.position = "none")+
scale_color_manual(values=mypalette)
ggsave_golden(path = "~/Desktop/EMCS/Plots_paper/Covid",
filename = "Naiv1.pdf",plot=p1)
